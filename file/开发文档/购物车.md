# 购物车

## 存储redis

####为什么储存在redis

```java
1.购物车是一个读写都是高并发的操作，
  如果使用Mysql数据库储存，高并发的情况下，数据库压力变大容易引起服务器宕机
2.为什么不选其他nosql来存储，比如可以使用mongodb，
  使用mongodb，它的性能也并不能带来很大的提升
3.放在redis的好处就是
	数据结构好组织
	redis拥有较好的并发性能
4.使用redis存在的问题
	购物车是需要持久化保存
	redis默认是内存数据库，所有数据是存在内存的，一旦redis宕机了，那么所有的数据就丢失了
	但是mysql就不一样了，只要保存了，即使宕机了也还在
5.问题解决
	指定redis的持久化策略
	则redis的每一条数据，都能存储到磁盘中，即使redis宕机，下次重新启动，数据还可以恢复
	这样虽然损失一定的性能，没有那么高的吞吐量，但是即使如此，也比mysql快很多
	
```

#### 购物车的存储类型

```java
一个购物车里面就应该像一个数组，数组里面存储一个个的购物项
	用户:[购物项1,购物项2,购物项3...] 
	缺点对购物车中的购物项操作很麻烦
	==》将购物项也换成键值对形式
	用户:[[id:购物项1],[id:购物项2],[id:购物项3]...]
==>
因此使用hash结构存储购物车数据
	Map<userId,Map<skuId,skuItem>>
	userId：代表那个用户的购物车
	skuId：第一个值存储商品的id
	skuItem：第二个值存储商品的具体信息



```

